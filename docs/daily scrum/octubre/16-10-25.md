---
layout: default
title: 16 Octubre 2025
parent: Octubre 2025
grand_parent: Daily Scrums
nav_order: 16
---

# Daily Scrum - 16 de Octubre 2025

## üéØ Sprint 2 - D√≠a 3

Continuando con la implementaci√≥n del sistema RAG para el chatbot educativo.

---

## ‚úÖ ¬øQu√© hice ayer?

**Implementaci√≥n completa de la primera iteraci√≥n del servicio RAG:**

1. **Stack tecnol√≥gico definido y documentado** (`devLog/notas/RAG_Service_Stack.md`):
   - **Base de datos vectorial:** Qdrant (elegida por escalabilidad y rendimiento)
   - **Embeddings:** Ollama con modelo `nomic-embed-text` (768 dimensiones)
   - **Framework:** LangChain para abstracciones y utilidades
   - **API:** FastAPI con endpoints para b√∫squeda e indexaci√≥n

2. **Arquitectura del servicio implementada** (16 archivos nuevos, +1353 l√≠neas):
   - `api.py`: FastAPI con 5 endpoints funcionales
     - `/` - Informaci√≥n del servicio
     - `/health` - Health check con estado de Qdrant
     - `/search` - B√∫squeda sem√°ntica con filtros
     - `/index` - Indexaci√≥n de documentos
     - `/collection/info` - Informaci√≥n de la colecci√≥n vectorial
   
   - `config.py`: Configuraci√≥n centralizada con Pydantic Settings
   - `models.py`: Modelos de datos completos (Document, QueryRequest, QueryResponse, etc.)
   - `embeddings.py`: Servicio de embeddings con Ollama
   - `vector_store.py`: Operaciones con Qdrant (b√∫squeda, indexaci√≥n, filtrado)
   - `document_processor.py`: Chunking autom√°tico con RecursiveCharacterTextSplitter

3. **Caracter√≠sticas implementadas:**
   - ‚úÖ Chunking inteligente de documentos con overlap configurable (1000 chars, 200 overlap)
   - ‚úÖ Filtrado por metadata (asignatura, tipo_documento, fecha, tema, etc.)
   - ‚úÖ B√∫squeda sem√°ntica con umbral de similitud configurable
   - ‚úÖ Sistema de logging completo
   - ‚úÖ Singleton patterns para servicios (embedding, vector store)
   - ‚úÖ Preservaci√≥n de metadata en chunks

4. **Infraestructura Docker:**
   - Actualizado `docker-compose.yml` con servicios:
     - `qdrant`: Base de datos vectorial con persistencia
     - `ollama`: Servidor de embeddings (ya existente)
     - `rag-service`: Microservicio RAG (puerto 8081)
   - Dockerfile optimizado para el servicio RAG
   - Script `init_ollama.sh` para pre-cargar modelo de embeddings

5. **Documentaci√≥n completa:**
   - README exhaustivo con ejemplos de uso
   - Documentaci√≥n de configuraci√≥n y variables de entorno
   - Instrucciones de instalaci√≥n (Docker y local)
   - Modelo de metadata documentado

**Commit realizado:** `49c89b2` - "chore: Added first iteration of RAG service"

---

## üöÄ ¬øQu√© har√© hoy?

**Testing y validaci√≥n del servicio RAG:**

1. **Implementar tests unitarios:**
   - Tests para `document_processor.py` (chunking, metadata preservation)
   - Tests para `embeddings.py` (generaci√≥n de embeddings)
   - Tests para `vector_store.py` (indexaci√≥n, b√∫squeda, filtros)
   - Tests para endpoints de la API

2. **Pruebas de integraci√≥n:**
   - Verificar funcionamiento completo del stack (Qdrant + Ollama + RAG Service)
   - Probar flujo completo: indexaci√≥n ‚Üí b√∫squeda ‚Üí retrieval
   - Validar filtros de metadata

3. **Optimizaciones y mejoras:**
   - Revisar configuraci√≥n de chunking (¬øes √≥ptimo 1000/200?)
   - Implementar generaci√≥n de IDs √∫nica para documentos (UUID vs hash)
   - Evaluar necesidad de cach√© de embeddings

4. **Documentaci√≥n adicional:**
   - Crear `docs/CHUNKING.md` con estrategias de chunking
   - Documentar flujos de datos y arquitectura
   - A√±adir ejemplos de uso pr√°ctico

---

## üöß Obst√°culos

**Identificados:**
- ‚ö†Ô∏è Falta sistema de tests - cr√≠tico antes de continuar desarrollo
- ‚ö†Ô∏è Generaci√≥n de IDs de puntos en Qdrant usa √≠ndice secuencial - puede causar conflictos en producci√≥n
- ‚ö†Ô∏è No hay validaci√≥n de que Ollama tenga el modelo `nomic-embed-text` descargado

**A resolver:**
- Implementar generaci√≥n de IDs robusta (UUID o hash del contenido)
- A√±adir verificaci√≥n de modelo en `init_ollama.sh`
- Crear suite de tests completa antes de integrar con el backend principal

---

## üìä Progreso del Sprint 2

**Issue #8 - Sistema RAG:**
- Estado: üü° **En progreso** (70% completado)
- Completado:
  - ‚úÖ Investigaci√≥n de stack tecnol√≥gico
  - ‚úÖ Implementaci√≥n de servicio base
  - ‚úÖ API REST funcional
  - ‚úÖ Chunking y embedding
  - ‚úÖ B√∫squeda con filtros
  - ‚úÖ Dockerizaci√≥n
  - ‚úÖ Documentaci√≥n b√°sica
- Pendiente:
  - ‚è≥ Tests unitarios e integraci√≥n
  - ‚è≥ Optimizaciones
  - ‚è≥ Documentaci√≥n avanzada
  - ‚è≥ Integraci√≥n con backend principal

---

## üí° Decisiones t√©cnicas tomadas

1. **Qdrant sobre ChromaDB:** Mayor escalabilidad y mejor rendimiento para b√∫squedas
2. **nomic-embed-text:** Modelo de embeddings optimizado, 768 dimensiones, buen balance calidad/velocidad
3. **LangChain:** Framework maduro con buenas abstracciones para RAG
4. **Chunk size 1000/overlap 200:** Basado en mejores pr√°cticas, a validar emp√≠ricamente
5. **FastAPI:** Consistencia con el resto del proyecto

---

## üéØ Meta para ma√±ana

- Suite de tests completa funcionando
- Primera prueba de integraci√≥n exitosa con documentos reales
- Decisi√≥n sobre ID generation strategy
- Comenzar integraci√≥n con el backend principal

---

## üìù Notas adicionales

**Recursos √∫tiles creados:**
- `devLog/notas/RAG_Service_Stack.md` - Documentaci√≥n t√©cnica completa del stack
- `rag-service/README.md` - Gu√≠a de uso del servicio

**Pr√≥ximos microservicios a considerar:**
- Servicio de scraping de PRADO (cuando corresponda)
- Servicio de procesamiento de PDFs/documentos
